"use strict";$(document).ready(function(){function t(t,n){var a=new XMLSerializer;$.ajax({url:n,success:function(n){var o=a.serializeToString(n);t.append(o),t.find("svg").unwrap()}})}function n(){function t(){function t(){$(document).mouseup(function(t){u.is(t.target)||0!==u.has(t.target).length||$(u).fadeOut(250)})}m.on("click",function(){$(u).fadeIn(300)}),t()}function n(t){$(i).html(t.attr("data-town")),$(s).html(t.attr("data-status")),$(c).html(t.attr("data-adress")),t.attr("data-website").length?($(v).html(t.attr("data-website")),$(v).attr("href","https://".concat(t.attr("data-website")))):$(v).html(""),$(l).html(t.attr("data-first-phone")),$(g).html(t.attr("data-second-phone"))}function o(){$(document).mouseup(function(t){var n=$(".connect-modal-container");n.is(t.target)||0!==n.has(t.target).length||($(".connect-modal").fadeOut(250),$("body").css("overflow","visible"))})}var e=$(".connect-button"),r=$(".connect-modal-scheme button"),i=$(".town-modal-title"),s=$(".connect-modal__status"),c=$(".connect-modal__adress"),v=$(".connect-modal__link"),l=$(".connect-modal__phone__first"),u=$(".town-modal"),m=$(".town-modal-wrap"),g=$(".connect-modal__phone__second");t(),e.each(function(t,o){$(o).on("click",function(){$(".connect-modal").fadeIn(250),$("body").css("overflow","hidden"),n($(this));var t=JSON.parse($(this).attr("data-coordinates"));$("#map").empty(),a(t)})}),$(r).on("click",function(){$(".connect-modal").fadeOut(250),$("body").css("overflow","visible")}),o()}function a(t){$("#map").length>0&&ymaps.ready(function(){var n="";n="[51.531825572387724,46.01106200000002]"===JSON.stringify(t)?"Адрес: Ул. Советская 86/70":"[51.498775094836816,46.11590139814754]"===JSON.stringify(t)?"ул. М. Горького, 28":"[45.03911564913005,38.98481291104504]"===JSON.stringify(t)?"ул. Северная, 311/1, оф.19":"[51.68371724420709,39.183256728835964]"===JSON.stringify(t)?'Московский пр., 7Е, оф. 226 (БЦ "Плаза")':"[43.580503399147226,39.71970927116393]"===JSON.stringify(t)?"ул. Войкова, д.1/1, оф.23":"[54.308244521039086,48.38772785273916]"===JSON.stringify(t)?" ул.Минаева 11 (ТРК СПАРТАК), оф.201":"ул. Революционная, 18";var a=new ymaps.Map("map",{center:t,zoom:17,multiTouch:!1,controls:["zoomControl"]},{suppressMapOpenBlock:!0}),o=new ymaps.Placemark(t,{hintContent:n});a.geoObjects.add(o),a.controls.remove("routeEditor"),a.behaviors.disable("scrollZoom")})}function o(){function t(t){var n=$(".connect-info-item");n.each(function(n,a){$(a).hasClass("connect-info-item__order")&&$(a).removeClass("connect-info-item__order"),$(a).find("h1").text().indexOf(t)>-1&&$(a).addClass("connect-info-item__order")})}function n(){if($(".connect-info-item").length){var n=JSON.parse(localStorage.getItem("townData"));t(n.town)}}function a(){r.fadeOut(100),e.removeClass("navtop-open")}n();var o=$(".navtown-item"),e=$(".navigation-connect-wrap"),r=$(".navtop-modal");o.on("click",function(){a(),$(".connect-info-item").length&&t($(this).text())}),e.on("click",function(){$(this).hasClass("navtop-open")?a():(a(),$(this).siblings(".navtop-modal").fadeIn(500),$(this).addClass("navtop-open"))})}function e(){$(document).mouseup(function(t){var n=$(".navtop-modal");n.is(t.target)||0!==n.has(t.target).length||n.fadeOut()})}function r(){function t(){i.forEach(function(t){t.addEventListener("click",function(){if("Другое"!==t.innerHTML){var a={};a.town=this.innerHTML,a.adress=this.getAttribute("data-adress"),a.firstPhone=this.getAttribute("data-first-phone"),a.secondPhone=this.getAttribute("data-second-phone"),localStorage.setItem("townData",JSON.stringify(a)),n()}})})}function n(){var t=JSON.parse(localStorage.getItem("townData"));r.forEach(function(n){n.innerHTML=t.town}),e.forEach(function(n){n.innerHTML=t.adress}),a.forEach(function(n){n.innerHTML=t.firstPhone}),o.forEach(function(n){n.innerHTML=t.secondPhone})}var a=document.querySelectorAll(".phone-first"),o=document.querySelectorAll(".phone-second"),e=document.querySelectorAll(".adress-title"),r=document.querySelectorAll(".town-title"),i=document.querySelectorAll(".navtown-item");localStorage.getItem("townData")&&n(),t()}if($(".zaimy-carousel").owlCarousel({loop:!0,items:3,video:!0,mouseDrag:!1,autoplay:3e3,autoplaySpeed:1500,autoplayHoverPause:!0,navElement:"button",navText:['<div class="svg" data-src="img/zaimy/arrow-left.svg"></div>','<div class="svg" data-src="img/zaimy/arrow-right.svg"></div>'],nav:!0,margin:10,responsive:{0:{items:1,nav:!1},600:{items:2,nav:!0},1024:{items:3}}}),$("#saving-slider").owlCarousel({loop:!0,items:1,animateOut:"fadeOut",mouseDrag:!1,autoHeight:!0,autoplay:1e3,autoplaySpeed:500}),$(".about-slider").owlCarousel({loop:!0,items:3,navElement:"button",navText:['<div class="svg" data-src="img/zaimy/arrow-left.svg"></div>','<div class="svg" data-src="img/zaimy/arrow-right.svg"></div>'],nav:!0,margin:10,responsive:{0:{items:1,nav:!1},600:{items:2,nav:!0},1024:{items:3}}}),$(".svg").each(function(){var n=$(this).data("src");t($(this),n)}),n(),o(),e(),r(),$(".navigation-bottom-list")[0]){var i=function(){var t=$(arguments.length<=0?void 0:arguments[0]),n=$(arguments.length<=1?void 0:arguments[1]),a=$(arguments.length<=2?void 0:arguments[2]);t.click(function(){n.fadeIn(500)}),a.click(function(){n.fadeOut(500)})},s=function(t){$(document).mouseup(function(n){var a=$(t);a.is(n.target)||0!==a.has(n.target).length||a.fadeOut()})},c=function(){var t=$(arguments.length<=0?void 0:arguments[0]),n=$(arguments.length<=1?void 0:arguments[1]);t.click(function(){n.fadeToggle(300)})},v=function(){for(var t=arguments.length,n=new Array(t),a=0;t>a;a++)n[a]=arguments[a];$(document).mouseup(function(t){var a=$(n[0]);a.is(t.target)||0!==a.has(t.target).length||a.fadeOut()})},l=function(){var t=document.location.href,n=$(arguments.length<=0?void 0:arguments[0]),a=$(arguments.length<=1?void 0:arguments[1]);n.each(function(n,a){t===a.href&&$(a).addClass("nav-bottom-active")}),a.each(function(t,n){"Частным клиентам"===$(n).html()&&$(n).addClass("nav-top-active")})};if($(".calc-item").length){var u=function(){A.checked?(m(),$(".saving-options__button").eq(1).addClass("saving-options__button__active"),$(".saving-options__program").eq(1).addClass("saving-options__program__active"),$(".saving-options__button").eq(0).removeClass("saving-options__button__active"),$(".saving-options__program").eq(0).removeClass("saving-options__program__active")):(g(),$(".saving-options__button").eq(0).addClass("saving-options__button__active"),$(".saving-options__program").eq(0).addClass("saving-options__program__active"),$(".saving-options__button").eq(1).removeClass("saving-options__button__active"),$(".saving-options__program").eq(1).removeClass("saving-options__program__active"))},m=function(){var t,n=0,a=$(".summ-value").val(),o=$(".time-value").val();a>=3e3&&199999>=a?t=[{monthArr:3,stavkaArr:3},{monthArr:6,stavkaArr:4},{monthArr:12,stavkaArr:6},{monthArr:24,stavkaArr:7.5},{monthArr:36,stavkaArr:8.5}]:a>=2e5&&399999>=a?t=[{monthArr:3,stavkaArr:4},{monthArr:6,stavkaArr:5},{monthArr:12,stavkaArr:7},{monthArr:24,stavkaArr:8.5},{monthArr:36,stavkaArr:9.5}]:a>=4e5&&(t=[{monthArr:3,stavkaArr:5},{monthArr:6,stavkaArr:6},{monthArr:12,stavkaArr:8},{monthArr:24,stavkaArr:9.5},{monthArr:36,stavkaArr:10.5}]);for(var e,r,i=0;i<t.length;i++){if(o==t[i].monthArr&&(n=+a/100*(t[i].stavkaArr/12)*o,r=t[i].stavkaArr),r>p){var s=(r-.35*(r-p))/12*o/100,c=a*s,v=n-c;n-=v}else e=0;$(".calc-result__info")[0].innerHTML=r+"%",$(".calc-result__info")[1].innerHTML=Math.round(e)+"р.",$(".calc-result__info")[2].innerHTML=Math.round(n)+"р."}},g=function(){var t,n=0,a=$(".summ-value").val(),o=$(".time-value").val();a>=3e3&&199999>=a?t=[{monthArr:3,stavkaArr:4},{monthArr:6,stavkaArr:5},{monthArr:12,stavkaArr:9.5},{monthArr:24,stavkaArr:10},{monthArr:36,stavkaArr:11}]:a>=2e5&&399999>=a?t=[{monthArr:3,stavkaArr:5},{monthArr:6,stavkaArr:6},{monthArr:12,stavkaArr:10.5},{monthArr:24,stavkaArr:11},{monthArr:36,stavkaArr:12}]:a>=4e5&&(t=[{monthArr:3,stavkaArr:7},{monthArr:6,stavkaArr:8},{monthArr:12,stavkaArr:11.5},{monthArr:24,stavkaArr:12},{monthArr:36,stavkaArr:12.5}]);for(var e,r,i=0;i<t.length;i++){if(o==t[i].monthArr&&(n=+a/100*(t[i].stavkaArr/12)*o,r=t[i].stavkaArr),r>=p){var s=(r-.35*(r-p))/12*o/100,c=a*s;e=n-c,n-=e}else e=0;$(".calc-result__info")[0].innerHTML=r+"%",$(".calc-result__info")[1].innerHTML=Math.round(e)+"р.",$(".calc-result__info")[2].innerHTML=Math.round(n)+"р."}},d=function(){var t=document.querySelectorAll(".calc-item__input")[0],n=document.querySelectorAll(".calc-item-add__range")[0],a=document.querySelectorAll(".calc-item__input")[1],o=document.querySelectorAll(".calc-item-add__range")[1];u(),n.addEventListener("input",function(){t.value=n.value,u()});var e=[3,6,12,24,36];o.addEventListener("input",function(){for(var t=0;t<e.length;t++)o.value==e[t]&&(a.value=o.value);u()})},_=function(){$(".saving-options__button").on("click",function(){$(".saving-options__button").removeClass("saving-options__button__active"),$(this).addClass("saving-options__button__active"),"максимальный доход"===$(this).html()?(g(),$(".saving-options__program").eq(0).addClass("saving-options__program__active"),$(".saving-options__program").eq(1).removeClass("saving-options__program__active"),A.checked=!1):(m(),$(".saving-options__program").eq(0).removeClass("saving-options__program__active"),$(".saving-options__program").eq(1).addClass("saving-options__program__active"),A.checked=!0)})},f=function(){$(".saving-options__program").on("click",function(){$(".saving-options__program").removeClass("saving-options__program__active"),$(this).addClass("saving-options__program__active"),"ПРОГРАММА «КОМФОРТ»"===$(this).html()?(m(),$(".saving-options__button").eq(0).removeClass("saving-options__button__active"),$(".saving-options__button").eq(1).addClass("saving-options__button__active"),A.checked=!0):(g(),$(".saving-options__button").eq(0).addClass("saving-options__button__active"),$(".saving-options__button").eq(1).removeClass("saving-options__button__active"),A.checked=!1)})},h=function(){var t=document.querySelectorAll(".calc-item__input")[0];t.addEventListener("input",function(){t.value<3e3||(t.value>1e8?t.value="100000000":u())})},p=12,A=document.querySelector(".calc-item-checkbox__square");A.addEventListener("click",function(){u()}),h(),d(),_(),f()}c(".navigation-bottom-menu__hamburger",".navigation-bottom-list"),v(".navigation-bottom-list"),i(".saving-tariff-button button",".tariff-info",".tariff-close"),s(".tariff-info"),l(".navigation-bottom-menu li a",".navigation-list li a")}else{var b=function(){var t=$(arguments.length<=0?void 0:arguments[0]),n=$(arguments.length<=1?void 0:arguments[1]);t.click(function(){n.fadeToggle(300)})},k=function(){for(var t=arguments.length,n=new Array(t),a=0;t>a;a++)n[a]=arguments[a];$(document).mouseup(function(t){var a=$(n[0]);a.is(t.target)||0!==a.has(t.target).length||a.fadeOut()})},y=function(){var t=document.location.href,n=$(arguments.length<=0?void 0:arguments[0]),a=$(arguments.length<=1?void 0:arguments[1]);n.each(function(n,a){t===a.href&&$(a).addClass("b-bottom-active")}),a.each(function(t,n){"Бизнесу"===$(n).html()&&$(n).addClass("b-top-active")})};b(".b-navigation-bottom-menu__hamburger",".b-navigation-bottom-list"),k(".b-navigation-bottom-list"),y(".b-navigation-bottom-menu li a",".b-navigation-list li a")}});